{% extends "layout.html" %}
{% block title %} 砖专 {% endblock %}

{% block content %}
<div class="row justify-content-center">
  <div class="col-12 col-lg-10">
    <div class="card shadow-sm border-0">
      <div class="card-body">
        <h3 class="mb-4 text-primary text-center"> 注住拽转 驻转转 专注</h3>
        
        <div id="master-table-container">
          <!-- 转 住  转 -->
        </div>

        <!-- 注 专专转  砖 注住拽转 -->
        <div id="no-data-msg" class="text-center text-muted" style="display: none;">
          <i class="bi bi-info-circle"></i>  注住拽转 驻转转 专注.
        </div>
      </div>
    </div>
  </div>
</div>
{% endblock %}

{% block scripts %}
<script>
  async function refreshTable() {
    try {
      const response = await fetch("/dashboard/table");
      if (response.ok) {
        const html = await response.text();

        const container = document.getElementById("master-table-container");
        const noDataMsg = document.getElementById("no-data-msg");

        // 拽  砖 <tr> 转 志tbody = 砖 转
        const parser = new DOMParser();
        const doc = parser.parseFromString(html, "text/html");
        const hasData = doc.querySelector("tbody tr") !== null;

        if (hasData) {
          container.innerHTML = html;
          container.style.display = "block";
          noDataMsg.style.display = "none";
        } else {
          container.innerHTML = "";
          container.style.display = "none";
          noDataMsg.style.display = "block";
        }
      }
    } catch (err) {
      console.error("砖 注 :", err);
    }
  }

  refreshTable(); // 专爪 专砖 转
  setInterval(refreshTable, 5000); // 专注  5 砖转
</script>
{% endblock %}
